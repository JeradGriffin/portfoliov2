<div class="portfolio-page-container">
    <div class="portfolio-example">
        <div class="portfolio-text">
            <h2></h2>
            <p></p>
        </div>
        <div class="site-containers">
            <section class="mobile-image">
                <div class="img-container">
                    <img src="" alt="Example Portfolio" class="portfolio-image" id="myImg">
                    <!-- The Modal -->
                    <div id="myModal" class="modal">
                        <!-- The Close Button -->
                        <span class="close" onclick="document.getElementById('myModal').style.display='none'">&times;</span>

                        <!-- Modal Content (The Image) -->
                        <img class="modal-content" id="img01">
                    </div>
                </div>
            </section>
            <section class="desktop-image">
                <div class="img-container">
                    <img src="" alt="Example Portfolio" class="portfolio-image" id="myImg">
                    <!-- The Modal -->
                    <div id="myModal" class="modal">
                        <!-- The Close Button -->
                        <span class="close" onclick="document.getElementById('myModal').style.display='none'">&times;</span>

                        <!-- Modal Content (The Image) -->
                        <img class="modal-content" id="img01">
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>

<style>
    .portfolio-page-container {
        container-type: inline-size;
        container-name: portfolio-example;
        display: flex;
        align-items: center;

        .portfolio-example {
            display: grid;
            gap: var(--spacing--x-large);
            grid-template-columns: 1fr;
            padding: var(--spacing--large);
            text-align: center;

            .portfolio-text {
                display: flex;
                flex-direction: column;
                gap: var(--spacing--small);
                margin-top: unset;
                font-size: 1.1rem;
                color: #333;
                max-inline-size: 28rem;
                text-align: left;

                p {
                    font-size: var(--p-size, 1rem);
                    font-weight: normal;
                    line-height: 1.6;
                    margin-block-end: 0;
                }

                a { color: var(--color--primary); }
            }
        }

        .site-containers {
            display: grid;
            grid-template-columns: 1fr;
            grid-auto-rows: auto;
            grid-template-rows: auto;
            gap: var(--spacing--small) 0;
            max-inline-size: 100%;

            section {
                box-shadow: none;
                max-block-size: 31.25rem;
                overflow-y: scroll;
                padding: 0;
                scrollbar-width: none;
            }

            .img-container {
                border-radius: var(--border-radius-8);
            }

            .portfolio-image, .desktop-image, .mobile-image {
                width: 100%;
                border-radius: 8px;
                /* box-shadow: 0 4px 8px rgba(0,0,0,0.1); */
                img {
                    width: 100%;
                    border-radius: var(--border-radius-8);
                    cursor: pointer;
                }
            }

            /* Style the Image Used to Trigger the Modal */
            #myImg {
                border-radius: 5px;
                cursor: pointer;
                transition: 0.3s;
            }

            /* The Modal (background) */
            .modal {
                display: none; /* Hidden by default */
                position: fixed; /* Stay in place */
                z-index: 2; /* Sit on top */
                padding-top: 100px; /* Location of the box */
                left: 0;
                top: 0;
                width: 100%; /* Full width */
                height: 100%; /* Full height */
                overflow: auto; /* Enable scroll if needed */
                background-color: rgb(0,0,0); /* Fallback color */
                background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
            }

            /* Modal Content (Image) */
            .modal-content {
                margin: auto;
                display: block;
                width: 80%;
                max-width: 700px;
            }

            /* Caption of Modal Image (Image Text) - Same Width as the Image */
            #caption {
                margin: auto;
                display: block;
                width: 80%;
                max-width: 700px;
                text-align: center;
                color: #ccc;
                padding: 10px 0;
                height: 150px;
            }

            /* Add Animation - Zoom in the Modal */
            .modal-content, #caption { 
                -webkit-animation-name: zoom;
                -webkit-animation-duration: 0.6s;
                animation-name: zoom;
                animation-duration: 0.6s;
            }

            @-webkit-keyframes zoom {
                from {-webkit-transform:scale(0)} 
                to {-webkit-transform:scale(1)}
            }

            @keyframes zoom {
                from {transform:scale(0)} 
                to {transform:scale(1)}
            }

            /* The Close Button */
            .close {
                position: absolute;
                top: 4rem;
                right: 2rem;
                color: #f1f1f1;
                font-size: 40px;
                font-weight: bold;
                transition: 0.3s;
            }

            .close:hover,
            .close:focus {
                color: #bbb;
                text-decoration: none;
                cursor: pointer;
            }

            /* 100% Image Width on Smaller Screens */
            @media only screen and (max-width: 700px){
                .modal-content {
                    width: 100%;
                }
            }  
        }

        @container portfolio-example (min-width: 900px) {
            
            .site-containers {
                max-block-size: 18rem;
                max-inline-size: 60%;
                gap: var(--spacing--small);
                grid-template-columns: repeat(3, 1fr);

                section {
                    max-block-size: 18rem;
                }

                #myImg:hover {opacity: 0.7;}

                .desktop-image {
                    grid-column: 1 / 3;
                    grid-row: 1;
                }

                .mobile-image {
                    grid-column: 3;
                    grid-row: 1 / 2;
                } 
            }
            .portfolio-example {
                display: flex;
                align-items: flex-start;
                text-align: left;
                gap: var(--spacing--large);
                padding: 10rem var(--spacing--x-large);

                .portfolio-text {
                    /* grid-column: 2; */
                    margin-top: 0;
                    max-inline-size: 40%;
                }
            }
            .portfolio-image {
                grid-column: 1;
            }
        }
    }

    .portfolio-page-container.kraft .site-containers {
        .desktop-image {
            img {
                aspect-ratio: 1254 / 857;
            }
        }
    }


    .portfolio-page-container.fcsa .site-containers {
        .desktop-image {
            img {
                aspect-ratio: 337 / 968;
            }
        }

        .mobile-image {
            img {
                aspect-ratio: 104 / 968;
            }
        } 
    }

    .portfolio-page-container.chubb .site-containers {
        .desktop-image {
            img {
                height: 100%;
            }
        }
    }

    .portfolio-page-container.cornerstone .site-containers{
        .desktop-image {
            grid-column: 1 / 3;

            img {
                aspect-ratio: 737 / 857;
            }
        }
    }

    .portfolio-page-container.lg .site-containers, .portfolio-page-container.paloalto .site-containers, .portfolio-page-container.gocanvas .site-containers {
        .desktop-image {
            grid-column: 1 / 4;
        }
    }

    :root[data-theme="dark"] {
        .portfolio-text {
            color: var(--color--opposite, oklch(97.015% 0.00011 271.152));
            a { color: var(--color--opposite, oklch(97.015% 0.00011 271.152)); }
        }
    }
    
</style>

<script>
    // Example portfolio data
    const portfolioPageData = {
        kraft: {
            className: 'kraft',
            image: "/portfolio/images/kraft_desktop.png",
            image_mb: "/portfolio/images/kraft_mobile.png",
            title: "Kraft Landing Page",
            description: "This is a brief description of the Kraft project. It showcases an image above and some text below."
        },
        fcsa: {
            className: 'fcsa',
            image: "/portfolio/images/fcsa_desktop.png",
            image_mb: "/portfolio/images/fcsa_mobile.png",
            title: "Farm Credit Services of America (FCSA)",
            description: "I collaborated closely with the design and marketing teams to develop and launch FCSAâ€™s new company website. Built reusable web components in Adobe Experience Manager (AEM) to ensure the Figma designs were translated precisely into functional, responsive pages. Created custom authoring dialogs in AEM to allow the marketing team to easily manage and update content. Contributed to improving the overall user experience and site navigation, resulting in a more intuitive and consistent digital presence.",
            link: "https://www.fcsamerica.com"
        },
        chubb: {
            className: 'chubb',
            image: "/portfolio/images/chubb_desktop.png",
            image_mb: "/portfolio/images/chubb_mobile.png",
            title: "Chubb Project",
            description: "This is a brief description of the Chubb project. It showcases an image above and some text below."
        },
        cornerstone: {
            className: 'cornerstone',
            image: "/portfolio/images/cornerstone_desktop.png",
            image_mb: "/portfolio/images/cornerstone_mobile.png",
            title: "Cornerstone Project",
            description: "This is a brief description of the Cornerstone project. It showcases an image above and some text below."
        },
        urw: {
            className: 'urw',
            image: "/portfolio/images/urw-desktop.png",
            title: "Unibail-Rodamco-Westfield Project",
            description: "This is a brief description of the Unibail-Rodamco-Westfield project. It showcases an image above and some text below."
        },
        gocanvas: {
            className: 'gocanvas',
            image: "/portfolio/images/gocanvas-desktop.png",
            title: "Go Canvas Project",
            description: "This is a brief description of the GoCanvas project. It showcases an image above and some text below."
        },
        // lg: {
        //     className: 'lg',
        //     image: "/portfolio/images/lg_desktop.png",
        //     title: "LG Project",
        //     description: "This is a brief description of the LG project. It showcases an image above and some text below."
        // },
        paloalto: {
            className: 'paloalto',
            image: "/portfolio/images/palo_desktop.png",
            title: "Palo Alto Project",
            description: "This is a brief description of the Palo Alto project. It showcases an image above and some text below."
        }
        // Add more clients as needed
    };

    const portfolioCardUrl = sessionStorage.getItem('portfolioCardUrl');
    if (portfolioCardUrl) {
        const cardName = new URL(portfolioCardUrl).searchParams.get('card');
        const page_class = document.querySelector('.portfolio-page-container');
        if (page_class && cardName) {
            page_class.classList.add(cardName);
        }
        const data = portfolioPageData[cardName];
        if (data) {
            document.querySelector('.desktop-image .portfolio-image').src = data.image;
            
            const mobileImgEl = document.querySelector('.mobile-image .portfolio-image');
            const mobileSection = document.querySelector('.mobile-image');
            if (data.image_mb) {
                if (mobileImgEl) mobileImgEl.src = data.image_mb;
                if (mobileSection) mobileSection.style.display = '';
            } else {
                if (mobileSection) mobileSection.style.display = 'none';
            }
            document.querySelector('.portfolio-text h2').textContent = data.title;
            document.querySelector('.portfolio-text p').textContent = data.description;
            if (data.link) {
                const linkElement = document.createElement('a');
                linkElement.href = data.link;
                linkElement.target = "_blank";
                linkElement.textContent = "View Project";
                document.querySelector('.portfolio-text').appendChild(linkElement);
            }
        }
    }

    // Get the modal
    const modal = document.getElementById('myModal');

    // Attach click handlers to all portfolio images (desktop + mobile)
    // Disable on mobile devices
    const isMobile = /Mobi|Android|iPhone|iPad|iPod|Opera Mini|IEMobile/.test(navigator.userAgent) ||
                     (window.matchMedia && window.matchMedia('(pointer:coarse)').matches);

    const imgs = document.querySelectorAll('.portfolio-image');

    if (!isMobile) {
        imgs.forEach(img => {
            img.addEventListener('click', function () {
                // Find the modal inside the same img-container (handles duplicated markup)
                const container = this.closest('.img-container') || document;
                const modalEl = container.querySelector('.modal') || document.getElementById('myModal');
                const modalImg = modalEl ? modalEl.querySelector('.modal-content') : null;
                if (!modalEl || !modalImg) return;
                modalImg.src = this.src;
                modalImg.alt = this.alt || '';
                modalEl.style.display = 'block';
            });
        });
    } else {
        // On mobile: make images inert (no modal) and remove pointer affordance
        imgs.forEach(img => {
            img.style.cursor = 'default';
            img.setAttribute('aria-disabled', 'true');
            // prevent any existing click handlers from opening modals
            img.addEventListener('click', e => {
                e.stopImmediatePropagation();
            }, { passive: true });
        });
    }

    // Close buttons for each modal
    document.querySelectorAll('.modal .close').forEach(close => {
        close.addEventListener('click', function () {
            const modalEl = this.closest('.modal');
            if (modalEl) modalEl.style.display = 'none';
        });
    });

    // Close modal when clicking outside the image
    document.querySelectorAll('.modal').forEach(modalEl => {
        modalEl.addEventListener('click', function (e) {
            if (e.target === modalEl) modalEl.style.display = 'none';
        });
    });

    
    
</script>